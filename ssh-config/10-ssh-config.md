# Базовая работа с ssh и вход в систему

Подключение к виртуальной машине по ssh:
```
ssh -p 10210 tpadmin@student.bmstu.cloud
```
При первом подключении он попросит пароль от пользователя. Пароль можно взять у [@krautcat](https://github.com/krautcat).

Дальше нам нужно сгенерировать ключ:
```
ssh-keygen -f /home/$USER/.ssh/<key_name>_rsa
```
Здесь `<key_name>` — имя ключа. В процессе генерации он попросить пароль (passphrase). Можно не вводить, но лучше всего будет, если вы введёте его. Его необходимо запомнить.

Далее нам нужно скопировать публичную часть ключа на сервер:
```
ssh-copy-id -i /home/$USER/.ssh/<key_name>_rsa.pub tpadmin@student.bmstu.cloud -p 10210
```
Здесь `<key_name>` — имя сгенерированного ключа. Дальше необходимо ещё раз ввести пароль.

Затем добавим ключ в ssh-агент:
```
ssh-add ~/.ssh/<key_name>_rsa
```
ssh-агент попросит пароль от ключа, его нужно будет добавить

После этого настройку ssh можно считать законченной. Подключаться по ssh к удалённой машине можно теперь без пароля:
```
ssh -p 10210 tpadmin@student.bmstu.cloud
```
## Важно
* Добавлять ключ в агент нужно каждый раз при входе на локальную машину. Обойти это никак нельзя, так как это сделано для безопасности.
* Как использовать сторонние агенты, чтобы держать несколько ключей на системе под одним паролем, [ссылка на ArchWiki][b1322f83].

  [b1322f83]: https://wiki.archlinux.org/index.php/SSH_keys_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)#.D0.90.D0.B3.D0.B5.D0.BD.D1.82.D1.8B_SSH "SSH keys (Русский) — Агенты SSH"
